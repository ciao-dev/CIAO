var settings = {
      'CountryList': [{"code":"", "name":"Not specified", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"A1", "name":"Anonymous Proxy", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"A2", "name":"Satellite Provider", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"O1", "name":"Other Country", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"AD", "name":"Andorra", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"AE", "name":"United Arab Emirates", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"AF", "name":"Afghanistan", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"AG", "name":"Antigua and Barbuda", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"AI", "name":"Anguilla", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"AL", "name":"Albania", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"AM", "name":"Armenia", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"AO", "name":"Angola", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"AP", "name":"Asia/Pacific Region", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"AQ", "name":"Antarctica", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"AR", "name":"Argentina", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"AS", "name":"American Samoa", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"AT", "name":"Austria", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"AU", "name":"Australia", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"AW", "name":"Aruba", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"AX", "name":"Aland Islands", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"AZ", "name":"Azerbaijan", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"BA", "name":"Bosnia and Herzegovina", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"BB", "name":"Barbados", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"BD", "name":"Bangladesh", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"BE", "name":"Belgium", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"BF", "name":"Burkina Faso", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"BG", "name":"Bulgaria", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"BH", "name":"Bahrain", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"BI", "name":"Burundi", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"BJ", "name":"Benin", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"BL", "name":"Saint Bartelemey", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"BM", "name":"Bermuda", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"BN", "name":"Brunei Darussalam", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"BO", "name":"Bolivia", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"BQ", "name":"Bonaire, Saint Eustatius and Saba", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"BR", "name":"Brazil", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"BS", "name":"Bahamas", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"BT", "name":"Bhutan", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"BV", "name":"Bouvet Island", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"BW", "name":"Botswana", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"BY", "name":"Belarus", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"BZ", "name":"Belize", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"CA", "name":"Canada", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"CC", "name":"Cocos (Keeling) Islands", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"CD", "name":"Congo, The Democratic Republic of the", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"CF", "name":"Central African Republic", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"CG", "name":"Congo", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"CH", "name":"Switzerland", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"CI", "name":"Cote d'Ivoire", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"CK", "name":"Cook Islands", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"CL", "name":"Chile", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"CM", "name":"Cameroon", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"CN", "name":"China", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"CO", "name":"Colombia", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"CR", "name":"Costa Rica", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"CU", "name":"Cuba", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"CV", "name":"Cape Verde", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"CW", "name":"Curacao", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"CX", "name":"Christmas Island", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"CY", "name":"Cyprus", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"CZ", "name":"Czech Republic", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"DE", "name":"Germany", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"DJ", "name":"Djibouti", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"DK", "name":"Denmark", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"DM", "name":"Dominica", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"DO", "name":"Dominican Republic", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"DZ", "name":"Algeria", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"EC", "name":"Ecuador", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"EE", "name":"Estonia", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"EG", "name":"Egypt", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"EH", "name":"Western Sahara", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"ER", "name":"Eritrea", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"ES", "name":"Spain", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"ET", "name":"Ethiopia", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"EU", "name":"Europe", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"FI", "name":"Finland", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"FJ", "name":"Fiji", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"FK", "name":"Falkland Islands (Malvinas)", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"FM", "name":"Micronesia, Federated States of", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"FO", "name":"Faroe Islands", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"FR", "name":"France", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"GA", "name":"Gabon", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"GB", "name":"United Kingdom", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"GD", "name":"Grenada", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"GE", "name":"Georgia", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"GF", "name":"French Guiana", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"GG", "name":"Guernsey", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"GH", "name":"Ghana", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"GI", "name":"Gibraltar", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"GL", "name":"Greenland", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"GM", "name":"Gambia", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"GN", "name":"Guinea", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"GP", "name":"Guadeloupe", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"GQ", "name":"Equatorial Guinea", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"GR", "name":"Greece", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"GS", "name":"South Georgia and the South Sandwich Islands", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"GT", "name":"Guatemala", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"GU", "name":"Guam", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"GW", "name":"Guinea-Bissau", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"GY", "name":"Guyana", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"HK", "name":"Hong Kong", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"HM", "name":"Heard Island and McDonald Islands", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"HN", "name":"Honduras", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"HR", "name":"Croatia", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"HT", "name":"Haiti", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"HU", "name":"Hungary", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"ID", "name":"Indonesia", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"IE", "name":"Ireland", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"IL", "name":"Israel", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"IM", "name":"Isle of Man", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"IN", "name":"India", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"IO", "name":"British Indian Ocean Territory", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"IQ", "name":"Iraq", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"IR", "name":"Iran, Islamic Republic of", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"IS", "name":"Iceland", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"IT", "name":"Italy", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"JE", "name":"Jersey", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"JM", "name":"Jamaica", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"JO", "name":"Jordan", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"JP", "name":"Japan", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"KE", "name":"Kenya", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"KG", "name":"Kyrgyzstan", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"KH", "name":"Cambodia", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"KI", "name":"Kiribati", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"KM", "name":"Comoros", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"KN", "name":"Saint Kitts and Nevis", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"KP", "name":"Korea, Democratic People's Republic of", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"KR", "name":"Korea, Republic of", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"KW", "name":"Kuwait", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"KY", "name":"Cayman Islands", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"KZ", "name":"Kazakhstan", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"LA", "name":"Lao People's Democratic Republic", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"LB", "name":"Lebanon", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"LC", "name":"Saint Lucia", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"LI", "name":"Liechtenstein", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"LK", "name":"Sri Lanka", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"LR", "name":"Liberia", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"LS", "name":"Lesotho", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"LT", "name":"Lithuania", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"LU", "name":"Luxembourg", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"LV", "name":"Latvia", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"LY", "name":"Libyan Arab Jamahiriya", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"MA", "name":"Morocco", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"MC", "name":"Monaco", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"MD", "name":"Moldova, Republic of", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"ME", "name":"Montenegro", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"MF", "name":"Saint Martin", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"MG", "name":"Madagascar", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"MH", "name":"Marshall Islands", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"MK", "name":"Macedonia", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"ML", "name":"Mali", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"MM", "name":"Myanmar", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"MN", "name":"Mongolia", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"MO", "name":"Macao", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"MP", "name":"Northern Mariana Islands", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"MQ", "name":"Martinique", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"MR", "name":"Mauritania", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"MS", "name":"Montserrat", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"MT", "name":"Malta", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"MU", "name":"Mauritius", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"MV", "name":"Maldives", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"MW", "name":"Malawi", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"MX", "name":"Mexico", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"MY", "name":"Malaysia", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"MZ", "name":"Mozambique", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"NA", "name":"Namibia", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"NC", "name":"New Caledonia", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"NE", "name":"Niger", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"NF", "name":"Norfolk Island", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"NG", "name":"Nigeria", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"NI", "name":"Nicaragua", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"NL", "name":"Netherlands", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"NO", "name":"Norway", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"NP", "name":"Nepal", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"NR", "name":"Nauru", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"NU", "name":"Niue", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"NZ", "name":"New Zealand", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"OM", "name":"Oman", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"PA", "name":"Panama", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"PE", "name":"Peru", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"PF", "name":"French Polynesia", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"PG", "name":"Papua New Guinea", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"PH", "name":"Philippines", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"PK", "name":"Pakistan", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"PL", "name":"Poland", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"PM", "name":"Saint Pierre and Miquelon", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"PN", "name":"Pitcairn", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"PR", "name":"Puerto Rico", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"PS", "name":"Palestinian Territory", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"PT", "name":"Portugal", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"PW", "name":"Palau", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"PY", "name":"Paraguay", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"QA", "name":"Qatar", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"RE", "name":"Reunion", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"RO", "name":"Romania", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"RS", "name":"Serbia", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"RU", "name":"Russian Federation", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"RW", "name":"Rwanda", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"SA", "name":"Saudi Arabia", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"SB", "name":"Solomon Islands", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"SC", "name":"Seychelles", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"SD", "name":"Sudan", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"SE", "name":"Sweden", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"SG", "name":"Singapore", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"SH", "name":"Saint Helena", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"SI", "name":"Slovenia", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"SJ", "name":"Svalbard and Jan Mayen", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"SK", "name":"Slovakia", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"SL", "name":"Sierra Leone", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"SM", "name":"San Marino", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"SN", "name":"Senegal", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"SO", "name":"Somalia", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"SR", "name":"Suriname", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"SS", "name":"South Sudan", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"ST", "name":"Sao Tome and Principe", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"SV", "name":"El Salvador", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"SX", "name":"Sint Maarten", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"SY", "name":"Syrian Arab Republic", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"SZ", "name":"Swaziland", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"TC", "name":"Turks and Caicos Islands", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"TD", "name":"Chad", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"TF", "name":"French Southern Territories", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"TG", "name":"Togo", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"TH", "name":"Thailand", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"TJ", "name":"Tajikistan", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"TK", "name":"Tokelau", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"TL", "name":"Timor-Leste", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"TM", "name":"Turkmenistan", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"TN", "name":"Tunisia", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"TO", "name":"Tonga", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"TR", "name":"Turkey", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"TT", "name":"Trinidad and Tobago", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"TV", "name":"Tuvalu", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"TW", "name":"Taiwan", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"TZ", "name":"Tanzania, United Republic of", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"UA", "name":"Ukraine", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"UG", "name":"Uganda", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"UM", "name":"United States Minor Outlying Islands", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"US", "name":"United States", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"UY", "name":"Uruguay", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"UZ", "name":"Uzbekistan", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"VA", "name":"Holy See (Vatican City State)", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"VC", "name":"Saint Vincent and the Grenadines", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"VE", "name":"Venezuela", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"VG", "name":"Virgin Islands, British", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"VI", "name":"Virgin Islands, U.S.", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"VN", "name":"Vietnam", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"VU", "name":"Vanuatu", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"WF", "name":"Wallis and Futuna", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"WS", "name":"Samoa", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"YE", "name":"Yemen", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"YT", "name":"Mayotte", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"ZA", "name":"South Africa", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"ZM", "name":"Zambia", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0},{"code":"ZW", "name":"Zimbabwe", "transparent":false, "num_transparent":0, "anonymous":false, "num_anonymous":0, "elite":false, "num_elite":0, "any":false, "num_any":0}],
      'activeCountryList' : [],
      'enabled': false,
	  'max_num_proxy': 4,
      'num_proxy': 0,
      'num_proxy_http': 0,
      'num_proxy_http_full': 0,
      'num_proxy_https': 0,
      'num_proxy_https_full': 0,
      'currently_active': 1,
      'flag': 0,
      'alpha': 0.99, //moving average of the download time value. alpha*old+(1-alpha)new
      'query_url': "",
      'default_query_url': "https://api.isthatfreeproxysafe.com/query.php",
      'default_query_country_url': "https://api.isthatfreeproxysafe.com/query_country.php?strategy=2",
      'default_post_url' : "https://api.isthatfreeproxysafe.com/report.php", 
      'default_test_url' : "http://isthatfreeproxysafe.com/test/hello.html",
      'default_test_url_https' : "http://isthatfreeproxysafe.com/test/hello.html", //Just testing responsiveness, do not necessarily need https. see if we can add https.
      'exploration_timer': 50000,
      'exploitation_timer': 30000,
      'request_timer': 4000,
      'retransmissions':0,
      'reload':0,
      'start': [], //we can probably remove this
      'start_event': [],
      'start_first_event': [],
      'data_downloaded':[],
      'push_stats_after': 5,
      'statistics':[],
      'init': 0,
      'exploration': 0,
      'defaul_proxy_ip': "",
      'defaul_proxy_port': "",
      'selection_timeout' : 0,
      'selection_timeout_https' : 0,
      'debug': 0,
      'session_id': 0,
      'enabled_id': 0,
      'strategy': 1,
      'anonimity': "any",
      'region': "",
      'current_anonimity': "any",
      'current_region' : "",
      'optionmenu':null,
      'anonimitymenu':null,
      'messagedisplay':null,
      'messagetodisplay': 0,
      'popup_page_loaded_once': 0,
      'version' : chrome.app.getDetails().version,
      'experiments': 0 //some stuff are used only for simulating human behavior (e.g., retry on failures) in the experiments.
    },
    
    //two strategies are currently available: 
    //strategy 0: probe alle proxies with the actual urls for exploration_time and the use the best for exploitation time. HTTPs round robin only works on domain names (TODO: check and commit experimental code)
    //strategy 1: test all proxy first and eliminates the one with download time double than the minimum one. keep the orioginal ranking and the use the first on.
    //strategy 1 is the best thus used for deployment and all features are supported.
    
    //array of request entry
    requests=[], 
    
    //array of tabs title used for statistics on every page
    titles=[],
    
    //exploration and exploitation timers. useful for the strategy 0
    exploration_timeout=0,
    exploitation_timeout=0,
    

    
  
    //initialization function. 
    init = function() {
		if (settings.debug == 1) { console.log("INITIALIZING") }
		//plugin not initialized
		settings.init=2
		settings.session_id=Math.floor(Math.random() * 999999999999999);	
		updateIcons();
		
		fetch_countries();
		
		
		//clear proxy list and select random proxy to start the probing from (useful for strategy 0 only).
		ProxyList.proxyListHttp = [];
		ProxyList.fullProxyListHttp = [];
		ProxyList.proxyListHttps = [];
		ProxyList.fullProxyListHttps = [];
		ProxyList.proxyFilterList = [];
		ProxyList.default_proxy = null;
		ProxyList.flag=Math.floor((Math.random() * settings.currently_active) );	

		//Initialize filter list
		ProxyList.proxyFilterList.push(new Proxy("filter", "filter","","",100000,0,0,0,0,0,["*api.isthatfreeproxysafe.com*"]));
		
		
		//build the query url
		settings.query_url=settings.default_query_url;
		
		if(settings.anonimity=="anonymous"){
			settings.query_url=settings.query_url+"?strategy=7";
		}
		else {
			if(settings.anonimity=="elite")
				{
				settings.query_url=settings.query_url+"?strategy=8";
				}
			else{
				if(settings.anonimity=="transparent")
				{
				settings.query_url=settings.query_url+"?strategy=9";
				}
				else{
				settings.query_url=settings.query_url+"?strategy=6";
				}
			}
		}
			
		
		if(settings.region!=""){
			settings.query_url=settings.query_url+"&region="+settings.region;
		}
		
		
		settings.query_url=settings.query_url+"&version="+settings.version+"&enabled_id="+settings.enabled_id+"&session_id="+settings.session_id;
		
		
	//contact DB server and pull proxies at the beginning of the list	
		var xhr = new XMLHttpRequest();
		xhr.open("GET", settings.query_url, true);
		xhr.onreadystatechange = function() {
		  if (this.readyState ==  4 && this.status==200) {
			 var resp = JSON.parse(xhr.responseText)
			 
			 for (var i in resp){

				 settings.num_proxy_http_full=settings.num_proxy_http_full+1;
				 
			 ProxyList.fullProxyListHttp.push(new Proxy(i, resp[i]['ip']+":"+resp[i]['port'],resp[i]['ip'],resp[i]['port'],100000,0,0,0,0,0,[]));
			 if (settings.debug == 1) { console.log("proxy is "+resp[i]['ip']);}
			 if (settings.debug == 1) { console.log(ProxyList.proxyListHttp)}
			 
			 
			 }
			 settings.num_proxy_http=Math.min(settings.max_num_proxy,settings.num_proxy_http_full);
			 ProxyList.proxyListHttp=ProxyList.fullProxyListHttp.slice(0,settings.num_proxy_http);
			 
				 
				
			 if(settings.num_proxy_http>0){
				
				 ProxyList.default_proxy=ProxyList.proxyListHttp[0];
					
					if (settings.debug == 1) { console.log("defaul proxy is "+resp[0]['ip']);}
					if (settings.debug == 1) { console.log(ProxyList.proxyListHttp)}
					
					
					
					updatePac()
					//useful onyl for strategy 1
					if(settings.strategy==1){
					initial_test()
					fetch_https_proxies(); 
					}
					if(settings.strategy==0){
				  		exploration_timeout=setTimeout(OnExplorationTimerExpired, settings.exploration_timer)
				  		exploration_timeout=0;
				  		settings.init=1
				  		if(settings.popup_page_loaded_once>0){
				  		updateCurrentMessage(1);
				  		}
				  		settings.messagetodisplay=1
				  		settings.currently_active=settings.num_proxy_http;
				  													
				  		updateIcons();
				  	}
			 }
			 else{
				 
				 console.log("NO PROXY FOUND")
				 settings.init=0;
				 settings.session_id=0;	
				 stop();
				 console.log("NO PROXY FOUND")
			 }
					
		  }
		  else if (this.readyState ==  4 && this.status != 200){
			  if (settings.debug == 1) { console.log("Error in connecting to db")}
		  }
		}
		xhr.send();

		
	  	clearTimeout(exploration_timeout)
	  	clearTimeout(exploitation_timeout)
	  	
	  	//in case of strategy 0 we need to initialize the timer for exploration (which will then set the exploitation)
	  	//also the plugin is initialized at this point
	  	

	  		
        },
        
    fetch_countries=function(){
        	settings.activeCountryList=[];
        	
        	settings.CountryList[0].transparent=false;
			 settings.CountryList[0].anonymous=false;
			 settings.CountryList[0].elite=false;
			 settings.CountryList[0].any=false;
			 settings.CountryList[0].num_transparent=0;
			 settings.CountryList[0].num_anonymous=0;
			 settings.CountryList[0].num_elite=0;
			 settings.CountryList[0].num_any=0;
        	settings.activeCountryList.push(settings.CountryList[0]);
        	
        	var xhr = new XMLHttpRequest();
    		xhr.open("GET", settings.default_query_country_url+"&version="+settings.version+"&enabled_id="+settings.enabled_id+"&session_id="+settings.session_id, true);
    		xhr.onreadystatechange = function() {
    		  if (this.readyState ==  4 && this.status==200) {
    			 var resp = JSON.parse(xhr.responseText)
    			 for (var i in resp){
    				 index=settings.CountryList.map(function(e) {return e.code}).indexOf(resp[i]['code']);
    				 settings.CountryList[index].transparent=resp[i]['transparent'];
    				 settings.CountryList[0].transparent=(settings.CountryList[0].transparent || settings.CountryList[index].transparent);
    				 settings.CountryList[index].anonymous=resp[i]['anonymous'];
    				 settings.CountryList[0].anonymous=(settings.CountryList[0].anonymous || settings.CountryList[index].anonymous);
    				 settings.CountryList[index].elite=resp[i]['elite'];
    				 settings.CountryList[0].anonymous=(settings.CountryList[0].elite || settings.CountryList[index].elite);
    				 settings.CountryList[index].any=resp[i]['any'];
    				 settings.CountryList[0].any=(settings.CountryList[0].any || settings.CountryList[index].any);
    				 settings.CountryList[index].num_transparent=parseInt(resp[i]['num_transparent']);
    				 if(resp[i]['num_transparent']!="None"){
    				 settings.CountryList[0].num_transparent=settings.CountryList[0].num_transparent+settings.CountryList[index].num_transparent;
    				 }
    				 settings.CountryList[index].num_anonymous=parseInt(resp[i]['num_anonymous']);
    				 if(resp[i]['num_anonymous']!="None"){
    				 settings.CountryList[0].num_anonymous=settings.CountryList[0].num_anonymous+settings.CountryList[index].num_anonymous;
    				 }
    				 settings.CountryList[index].num_elite=parseInt(resp[i]['num_elite']);
    				 if(resp[i]['num_elite']!="None"){
    				 settings.CountryList[0].num_elite=settings.CountryList[0].num_elite+settings.CountryList[index].num_elite;
    				 }
    				 settings.CountryList[index].num_any=parseInt(resp[i]['num_any']);
    				 if(resp[i]['num_any']!="None"){
    				 settings.CountryList[0].num_any=settings.CountryList[0].num_any+settings.CountryList[index].num_any;
    				 }
    				 settings.activeCountryList.push(settings.CountryList[index]);
    			 }
    			 updateCountryList();
    			 
    		  }
    		  
    		}
    		xhr.send();
        },
    
    initial_test=function(){
        	settings.selection_timeout = 0
			var xhr_array = [];
			for (i=0; i<settings.num_proxy_http;i++){
			  	xhr_array[i] = new XMLHttpRequest();
			  	time_request=(new Date()).getTime();
			  	xhr_array[i].open("GET", settings.default_test_url+"?_time=" + time_request, true);
			  	xhr_array[i]._url=settings.default_test_url+"?_time=" + time_request ;
			  	xhr_array[i]._sent= (new Date).getTime()
			  	xhr_array[i]._id=i;
			  	ProxyList.proxyListHttp[i]['urls'].unshift(xhr_array[i]._url);
			  	updatePac();
			  	xhr_array[i].onreadystatechange = function(readystateEvent) {
				  if (this.readyState ==  4 && settings.selection_timeout>=0) {
					  if (settings.debug == 1) { console.log("RECEIVED HELLO "+ this._url +" "+((new Date).getTime() - this._sent)+" "+ProxyList.proxyListHttp[this._id]['ip'])  }
					

					ProxyList.proxyListHttp[this._id]['download_time']=((new Date).getTime() - this._sent)
					ProxyList.proxyListHttp[this._id]['download_items']=ProxyList.proxyListHttp[this._id]['download_items']+1
					ProxyList.proxyListHttp[this._id]['download_probe']=1
					ProxyList.proxyListHttp[this._id]['urls'].splice(ProxyList.proxyListHttp[this._id]['urls'].map(function(e) {return e}).indexOf(this._url),1);
			    	
					//set a timer to check the download time of all proxies in this probing phase. this is useful for strategy 1 only.
					if(settings.selection_timeout == 0 && settings.strategy==1){
						//for the moment wait twice the fastest proxy
						settings.selection_timeout = setTimeout(initial_sort, ProxyList.proxyListHttp[this._id]['download_time'])
					}
					
					

			    	
				  }
				  
				}
			  				
			  	
				xhr_array[i].send();
			  	}
			
			
        },
        
        initial_test_https=function(){
        	if(settings.popup_page_loaded_once>0){
        	updateCurrentMessage(1);
        	}
        	settings.messagetodisplay=1
        	settings.selection_timeout_https = 0
			var xhr_array = [];
			for (i=0; i<settings.num_proxy_https;i++){
			  	xhr_array[i] = new XMLHttpRequest();
			  	time_request=(new Date()).getTime();
			  	xhr_array[i].open("GET", settings.default_test_url+"?_time=" + time_request, true);
			  	xhr_array[i]._url=settings.default_test_url+"?_time=" + time_request ;
			  	xhr_array[i]._sent= (new Date).getTime()
			  	xhr_array[i]._id=i;
			  	ProxyList.proxyListHttps[i]['urls'].unshift(xhr_array[i]._url);
			  	
			  	updatePac();
			  	xhr_array[i].onreadystatechange = function(readystateEvent) {
				  if (this.readyState ==  4 && settings.selection_timeout_https >= 0) {
					  if (settings.debug == 1) { console.log("RECEIVED HELLO "+ this._url +" "+((new Date).getTime() - this._sent)+" "+ProxyList.proxyListHttps[this._id]['ip'])  }
					
					ProxyList.proxyListHttps[this._id]['download_time']=((new Date).getTime() - this._sent)
					ProxyList.proxyListHttps[this._id]['download_items']=ProxyList.proxyListHttps[this._id]['download_items']+1
					ProxyList.proxyListHttps[this._id]['download_probe']=1
					ProxyList.proxyListHttps[this._id]['urls'].splice(ProxyList.proxyListHttps[this._id]['urls'].map(function(e) {return e}).indexOf(this._url),1);
			    	
					//set a timer to check the download time of all proxies in this probing phase. this is useful for strategy 1 only.
					if(settings.selection_timeout_https == 0 && settings.strategy==1){
						//for the moment wait twice the fastest proxy
						settings.selection_timeout_https = setTimeout(initial_sort_https, ProxyList.proxyListHttps[this._id]['download_time'])
					}

			    	
				  }
				  
				}
				xhr_array[i].send();
			  	}
			
			
        },
        
        
        
    initial_sort=function(){
        	settings.selection_timeout=-1
        	//useful for the strategy 1 only
        	if (settings.debug == 1) { console.log("End of proxy probing")}

        	
        	i=settings.num_proxy_http-1;
        	
        	//remove the proxy that have not provided the probe page yet
        	while(i>=0){
        		ProxyList.proxyListHttp[i]['urls']=[]
        		if(ProxyList.proxyListHttp[i]['download_probe']==0){
        			ProxyList.proxyListHttp[i]['download_probe']=0
        			ProxyList.proxyListHttp.splice(i,1);
        			settings.num_proxy_http=settings.num_proxy_http-1
        		}else{
        			ProxyList.proxyListHttp[i]['download_probe']=0
        		}
        		i=i-1;
        	}

	    	
        	for(i=0; i<ProxyList.proxyListHttp.length;i++){
        		ProxyList.proxyListHttp[i]['urls']==[];
        		}
        	
        	
        	ProxyList.default_proxy=ProxyList.proxyListHttp[0];
        	updatePac();
        	
        	
        	//for the second strategy the plugin is initialized at this point.
        	settings.init=1
        	if(settings.messagetodisplay==2){
        		if(settings.popup_page_loaded_once>0){
        				updateCurrentMessage(2);
        			}
        			settings.messagetodisplay=2;}
        	else{
        		if(settings.popup_page_loaded_once>0){
        			updateCurrentMessage(1);
        		}
            	settings.messagetodisplay=1;
        	}
        	
        	updateIcons();
	    	if (settings.debug == 1) { console.log(ProxyList.proxyListHttp)}
        },
      
        initial_sort_https=function(){
        	settings.selection_timeout_https=-1
        	//useful for the strategy 1 only
        	if (settings.debug == 1) { console.log("End of proxy probing")}
        	
        	
        	i=settings.num_proxy_https-1;
        	
        	//remove the proxy that have not provided the probe page yet
        	while(i>=0){
        		ProxyList.proxyListHttps[i]['urls']=[]
        		if(ProxyList.proxyListHttps[i]['download_probe']==0){
        			ProxyList.proxyListHttps[i]['download_probe']=0
        			ProxyList.proxyListHttps.splice(i,1);
        			settings.num_proxy_https=settings.num_proxy_https-1
        		}else{
        			ProxyList.proxyListHttps[i]['download_probe']=0
        		}
        		i=i-1;
        	}
        	
        	for(i=0; i<ProxyList.proxyListHttps.length;i++){
        		ProxyList.proxyListHttps[i]['urls']==[];
        		}
        	
        	settings.num_proxy_https=ProxyList.proxyListHttps.length;
        	ProxyList.proxyListHttps[0]['urls']=["https://*"];
        	
        	updatePac();
        	
        	if(settings.popup_page_loaded_once>0){
        	updateCurrentMessage(2);
        	}
        	settings.messagetodisplay=2
        	
        	
        },
        
        change_proxy=function(){
        	chrome.tabs.query({"active": true,"lastFocusedWindow": true}, function (tabs) {
        		if(tabs[0].url.match("https") ){
        			change_proxy_https();
        		}else{
        			change_proxy_http();
        		}
                })
        	
        	
        },
        
    change_proxy_http=function(){
        	settings.init=2
    	  	updateIcons();
        	if(settings.popup_page_loaded_once>0){
        	updateCurrentMessage(background.settings.messagetodisplay);
        	}
        	
        	clearTimeout(exploration_timeout)
         	clearTimeout(exploitation_timeout)
         	
         	exploration_timeout=0
         	exploitation_timeout=0
        	
         	
         	//TODO for strategy 0: remove the n proxy used (code still experimental not committed)
        	
        	 if(settings.strategy==1){
        		 
        		 //check if you still have tested proxy
             	if(settings.num_proxy_http-1>0)
             		{
             		settings.init=1
         			settings.num_proxy_http_full=settings.num_proxy_http_full-1
             		settings.num_proxy_http=settings.num_proxy_http-1
             		
        		
             		proxy_index=ProxyList.fullProxyListHttp.map(function(e) {return e['name']}).indexOf(ProxyList.default_proxy['name']);
             		ProxyList.fullProxyListHttp.splice(proxy_index,1);
             		
             		ProxyList.proxyListHttp.splice(0,1);
             		ProxyList.default_proxy=ProxyList.proxyListHttp[0];

             		
             		updatePac();
             		setTimeout(updateIcons, 1000) //need timer to deal with asynchronous behaviur :(
             		if(settings.popup_page_loaded_once>0){
             		setTimeout(updateCurrentMessage, 1050, background.settings.messagetodisplay)
             		}
             		
             		}
             	else{
             		  if(settings.num_proxy_http_full-1>0){
             			 settings.num_proxy_http_full=settings.num_proxy_http_full-1
                  		settings.num_proxy_http=settings.num_proxy_http-1
                  		

                  		
                  		proxy_index=ProxyList.fullProxyListHttp.map(function(e) {return e['name']}).indexOf(ProxyList.default_proxy['name']);
                  		 ProxyList.fullProxyListHttp.splice(proxy_index,1);
                  		
                  		ProxyList.proxyListHttp.splice(0,1);
             			 settings.init=2;
             			updateIcons();
             			settings.num_proxy_http=Math.min(settings.max_num_proxy,settings.num_proxy_http_full);
           			    ProxyList.proxyListHttp=ProxyList.fullProxyListHttp.slice(0,settings.num_proxy_http);      
           					 ProxyList.default_proxy=ProxyList.proxyListHttp[0];
             			initial_test();
             			updateIcons();
             			if(settings.popup_page_loaded_once>0){
             			setTimeout(updateCurrentMessage, 1050, background.settings.messagetodisplay)
             			}
             		  }   
             		  else{
             			  stop();
             			  init();
             		  }
             	}
             }
        	
        },  
        
        change_proxy_https=function(){
        	settings.init=2
    	  	updateIcons();
        	if(settings.popup_page_loaded_once>0){
        	updateCurrentMessage(background.settings.messagetodisplay)
        	}
        	clearTimeout(exploration_timeout)
         	clearTimeout(exploitation_timeout)
         	
         	exploration_timeout=0
         	exploitation_timeout=0
        	
         	
         	//TODO for strategy 0: remove the n proxy used (code still experimental not committed)
        	
        	 if(settings.strategy==1){
        		 
        		 //check if you still have tested proxy
             	if(settings.num_proxy_https-1>0)
             		{
         			settings.num_proxy_https_full=settings.num_proxy_https_full-1
             		settings.num_proxy_https=settings.num_proxy_https-1
             		
             		
             		proxy_index=ProxyList.fullProxyListHttps.map(function(e) {return e['name']}).indexOf(ProxyList.proxyListHttps[0]['name']);
             		ProxyList.fullProxyListHttps.splice(proxy_index,1);
             		
             		ProxyList.proxyListHttps.splice(0,1);
             		
                	ProxyList.proxyListHttps[0]['urls']=["https://*"];
             		
             		updatePac();
      
             		}
             	else{
             			
             		  if(settings.num_proxy_https_full-1>0){
             			 settings.num_proxy_https_full=settings.num_proxy_https_full-1
                  		settings.num_proxy_https=settings.num_proxy_https-1
                  		
                  		
                  		proxy_index=ProxyList.fullProxyListHttps.map(function(e) {return e['name']}).indexOf(ProxyList.proxyListHttps[0]['name']);
                  		ProxyList.fullProxyListHttps.splice(proxy_index,1);
                  		
                  		ProxyList.proxyListHttps.splice(0,1);
             			settings.num_proxy_https=Math.min(settings.max_num_proxy,settings.num_proxy_https_full);
           			    ProxyList.proxyListHttps=ProxyList.fullProxyListHttps.slice(0,settings.num_proxy_https);      
           			 
             			initial_test_https();
             		  }   
             		  else{
             			 fetch_https_proxies();
             		  }
             	}
             }
        	settings.init=1
        	setTimeout(updateIcons, 1000) //need timer to deal with asynchronous behaviur :(
        	if(settings.popup_page_loaded_once>0){
        	setTimeout(updateCurrentMessage, 1050, background.settings.messagetodisplay)
        	}

        },  
        
        
        fetch_https_proxies=function(){ 
        	
        	ProxyList.fullProxyListHttps=[];
        	settings.num_proxy_https_full=0
        	//build the query url
    		settings.query_url=settings.default_query_url;
    		
        	if(settings.anonimity=="anonymous"){
    			settings.query_url=settings.query_url+"?strategy=7";
    		}
    		else {
    			if(settings.anonimity=="elite")
    				{
    				settings.query_url=settings.query_url+"?strategy=8";
    				}
    			else{
    				if(settings.anonimity=="transparent")
    				{
    				settings.query_url=settings.query_url+"?strategy=9";
    				}
    				else{
    				settings.query_url=settings.query_url+"?strategy=6";
    				}
    			}
    		}
    			
    		
    		if(settings.region!=""){
    			settings.query_url=settings.query_url+"&region="+settings.region;
    		}
    		

    		settings.query_url=settings.query_url+"&protocol=https";
    		settings.query_url=settings.query_url+"&version="+settings.version+"&enabled_id="+settings.enabled_id+"&session_id="+settings.session_id;
    		
    	//contact DB server and pull proxies at the beginning of the list	
    		var xhr = new XMLHttpRequest();
    		xhr.open("GET", settings.query_url, true);
    		xhr.onreadystatechange = function() {
    		  if (this.readyState ==  4 && this.status==200) {
    			 var resp = JSON.parse(xhr.responseText)
    			 for (var i in resp){
    				 settings.num_proxy_https_full=settings.num_proxy_https_full+1;
    				 ProxyList.fullProxyListHttps.push(new Proxy("https"+i,"https"+resp[i]['ip']+":"+resp[i]['port'],resp[i]['ip'],resp[i]['port'],100000,0,0,0,0,0,[]));
    				 
    			 if (settings.debug == 1) { console.log("proxy is "+resp[i]['ip']);}
    			 if (settings.debug == 1) { console.log(ProxyList.proxyListHttps)}
    			 
    			 
    			 }
    			 
    			 settings.num_proxy_https=Math.min(settings.max_num_proxy,settings.num_proxy_https_full);
    			 ProxyList.proxyListHttps=ProxyList.fullProxyListHttps.slice(0,settings.num_proxy_https);
    			 
    			 if(settings.num_proxy_https>0){
	


    					if (settings.debug == 1) { console.log("defaul proxy is "+resp[0]['ip']);}
    					if (settings.debug == 1) { console.log(ProxyList.proxyListHttps)}
    					
    					
    					updatePac();
    					initial_test_https();
        }
    		  
    }
    		 
    		  
    		}
    		 xhr.send();
        },  
     
	stop = function(){
       //plugin not initialized
    	settings.init=0
    	settings.num_proxy_http=0;
    	settings.num_proxy_http_full=0;
    	settings.num_proxy_https=0;
    	settings.num_proxy_https_full=0;
    	updateIcons();
    	settings.messagetodisplay=0;
    	if(settings.popup_page_loaded_once>0){
    	updateCurrentMessage(0);
    	}
        	
        if (settings.debug == 1) { console.log("STOPPING")	}
        
        
	  	clearTimeout(exploration_timeout)
	  	clearTimeout(exploitation_timeout)
	  	exploration_timeout=0
	  	exploitation_timeout=0
	  	settings.session_id=0;
	  	
		ProxyList.proxyListHttp = [];
		ProxyList.proxyListHttps = [];
		ProxyList.proxyFilterList = [];

		ProxyList.fullProxyListHttp = [];
		ProxyList.fullProxyListHttps = [];
		
		ProxyList.default_proxy = null;

		defaultSystemProxySetting();
		
		for(i in Statistics.TabStats_list){
			Statistics.TabStats_list[i]['end_time']=(new Date).getTime()
			Statistics.statsList[Statistics.num_stats]=Statistics.TabStats_list[i];
			Statistics.num_stats=Statistics.num_stats+1;
		}
		Statistics.TabStats_list=[];
		
		if(Statistics.num_stats>0 && settings.experiments==0){
			report_stats();
		}
		

	},
	
	getHttpProxy = function() {
		return ProxyList.default_proxy.ip + ':' + ProxyList.default_proxy.port;
	},
	
	getHttpsProxy = function() {
		return ProxyList.proxyListHttps[0]['ip']+":"+ProxyList.proxyListHttps[0]['port'];
	},
   
report_stats = function() {
		data = JSON.stringify(Statistics.statsList)
		request= new XMLHttpRequest()
		request.open("POST", settings.default_post_url+"?version="+settings.version, true)
		request.setRequestHeader("Content-type", "application/json")
		request.send(data)
		if (settings.debug == 1) {
		console.log(data)
		}
		request.onreadystatechange = function() {
		 if (this.readyState ==  4) {
			 if (settings.debug == 1) {
			 console.log(request.responseText)
			 }
		 }
		}
		Statistics.num_stats=0;
		Statistics.statsList=[];
	},
    
   
    
    OnTimerExpired = function(requestId,url,tab_id){
    	
    	if (settings.enabled && url!=settings.query_url && ! url.match("hello") && settings.init==1){	
        	
        		if (settings.debug == 1) { console.log("ALARM!! " + requestId + " "+ url+" "+tab_id)}
        		request_index=requests.map(function(e) {return e['requestId']}).indexOf(requestId);
        		proxy_id=requests[request_index]['proxy_id']
        		proxy_index=ProxyList.proxyListHttp.map(function(e) {return e['id']}).indexOf(proxy_id)
        		ProxyList.proxyListHttp[proxy_index]['urls'].splice(ProxyList.proxyListHttp[proxy_index]['urls'].map(function(e) {return e}).indexOf(url),1);
        		ProxyList.proxyListHttp[proxy_index]['timeouts']=ProxyList.proxyListHttp[proxy_index]['timeouts']+1
    	
        		requests.splice(request_index,1);
        		if(settings.strategy==0){
        			updatePac();
        		}
        		 
        		if(titles[tab_id]==url){
        			 if(settings.start_event[tab_id]!=-1 && settings.experiments==1 && settings.reload==1){
        					setTimeout(Reload,1000,tab_id)
        					}
        		 }
        		 else{
        		chrome.tabs.executeScript(tab_id, {file:'jquery-2.0.3.min.js'});
        		chrome.tabs.executeScript(tab_id, 
        			{code: "console.log('"+url+"'); var x=$(\"*\").map(function(){ if($(this).prop('src')=='"+url+"'){  $(this).load('"+url+"'); return $(this).get(0);} else if ($(this).prop('href')) if($(this).prop('href').indexOf('"+url+"')>-1) { $(this).load('"+url+"'); return $(this).get(0);} }); console.log((x)); $(x).length",
                			runAt: "document_idle"},
        			function (result) {
    						if (settings.debug == 1) { console.log("executed " +url+ " "+ result[0])}
    					
        			}); 
        		 }
        	}
    },
    
    
    

    OnExplorationTimerExpired = function(){
    	if (settings.debug == 1) { console.log("EXPLORATION TIMEOUT")}
    	exploitation_timeout=setTimeout(OnExploitationTimerExpired, settings.exploitation_timer)
    	exploration_timeout=0
    	//exploration_timeout=setTimeout(OnExplorationTimerExpired, settings.exploration_timer)
    	settings.currently_active=1
	  	settings.init=0
	  	
	  	
    	ProxyList.proxyListHttp.sort(function(a, b) {

    		if(a['download_items']==b['download_items']){
    				if(a['download_time'] <= b['download_time'])
        				return -1
        			else
        				return 1
    		}else{
    		if(a['download_items']>=b['download_items'])
    			return -1
    		else
    			return 1
    		}
    			
        	});
    	
    	
    	
    	
    	if (settings.debug == 1) { console.log("ORDERED")}
    	if (settings.debug == 1) { console.log(ProxyList.proxyListHttp)}
    	if (settings.debug == 1) { console.log(ProxyList.proxyListHttp[0])}
    	settings.init=1
    },
    
    OnExploitationTimerExpired = function(){
    	if (settings.debug == 1) { console.log("EXPLOITATION TIMEOUT")}
    	exploration_timeout=setTimeout(OnExplorationTimerExpired, settings.exploration_timer)
    	settings.currently_active=settings.num_proxy_http
    	ProxyList.flag=Math.floor((Math.random() * settings.currently_active) );	
    	if (settings.debug == 1) { console.log(" FLAG "+ProxyList.flag)}
    	for (i=0; i<settings.num_proxy_http;i++){
    		ProxyList.proxyListHttp[i]['download_time']=100000;
    		ProxyList.proxyListHttp[i]['download_items']=0;
    	}
	  	exploitation_timeout=0    	
    }
    
    Reload=function(tabId){
    	if(settings.start_event[tabId]!=-1){
    	chrome.tabs.reload(tabId);
    	}
    }
    
    ;



chrome.webRequest.onBeforeRequest.addListener(
		 function(details) {
	//for all request we can potentially change the proxy
if (settings.enabled && details.url!=settings.query_url && settings.init==1 && details.url.indexOf("isthatfreeproxysafe.com/test/hello")==-1){	

	 //select the proxy to use. If strategy 0 it is random over the active ones. otherwise it is the first which is now also the defaul one.
	 proxy_index=ProxyList.flag
	 ProxyList.flag=(ProxyList.flag+1)%settings.currently_active;
		  
	 ProxyList.proxyListHttp[proxy_index]['urls'].unshift(details.url)
	 ProxyList.proxyListHttp[proxy_index]['requests']=ProxyList.proxyListHttp[proxy_index]['requests']+1
     if (settings.debug == 1) { console.log("REQUEST "+details.url+" proxy "+ProxyList.proxyListHttp[proxy_index]['ip']+" flag "+ProxyList.flag+" ID "+ ProxyList.proxyListHttp[proxy_index]['id']+ " requests " + ProxyList.proxyListHttp[proxy_index]['requests'])}
		  
	 	if(settings.retransmissions==1){
	 	tmp_timeout=setTimeout(OnTimerExpired, settings.request_timer, details.requestId, details.url,details.tabId)
	 	}
	 	else{
	 		tmp_timeout=0
	 	}
	 	requests.push(new Requestentry(proxy_index, ProxyList.proxyListHttp[proxy_index]['id'],tmp_timeout,(new Date).getTime(),details.url,details.requestId,0));
	    
	 if(settings.strategy==0){   	  
		 updatePac();
	 }
	  
  }       

},
		
{urls: ["<all_urls>"]}, ["blocking"]);

chrome.webRequest.onHeadersReceived.addListener(
		 function(details) {
		    	//remove pattern from proxy once receive the first headers
		    	if (settings.enabled && details.url!=settings.query_url && settings.init==1 && details.url.indexOf("isthatfreeproxysafe.com/test/hello")==-1){	
		    		
		    		Statistics.TabStats_list[details.tabId]['num_objects_requested']=Statistics.TabStats_list[details.tabId]['num_objects_requested']+1;
		    		if(details.url.match("https")){
		    			Statistics.TabStats_list[details.tabId]['num_objects_requested_https']=Statistics.TabStats_list[details.tabId]['num_objects_requested_https']+1;
		    		}
		    			
		    		request_index=requests.map(function(e) {return e['requestId']}).indexOf(details.requestId);
		    			if(request_index>=0){
		    	    	proxy_id=requests[request_index]['proxy_id']
		    	    	proxy_index=ProxyList.proxyListHttp.map(function(e) {return e['id']}).indexOf(proxy_id)
		    	    	ProxyList.proxyListHttp[proxy_index]['urls'].splice(ProxyList.proxyListHttp[proxy_index]['urls'].map(function(e) {return e}).indexOf(details.url),1);
		    	    	clearTimeout(requests[request_index]['timeout']);
		    	    	ProxyList.proxyListHttp[proxy_index]['download_items']=ProxyList.proxyListHttp[proxy_index]['download_items']+1
		    	    	
		    	    	if (ProxyList.proxyListHttp[proxy_index]['download_time']==100000){
		    	    		ProxyList.proxyListHttp[proxy_index]['download_time']=((new Date).getTime()-requests[request_index]['request_time']);
		    	    	}
		    	    	else{
		    	    		ProxyList.proxyListHttp[proxy_index]['download_time']=settings.alpha*ProxyList.proxyListHttp[proxy_index]['download_time']+(1-settings.alpha)*((new Date).getTime()-requests[request_index]['request_time']);
		    	    	}
		    	    	
		    	    	if (settings.debug == 1) { console.log("Proxy ID"+ requests[request_index]['proxy'] + " ip "+ ProxyList.proxyListHttp[proxy_index]['ip'] + " Download time "+ ProxyList.proxyListHttp[proxy_index]['download_time']+" timeouts "+ProxyList.proxyListHttp[proxy_index]['timeouts'] + " errors "+ ProxyList.proxyListHttp[proxy_index]['errors'])}
		    	    	if (settings.debug == 1) { console.log(details)}
		    	    	requests.splice(request_index,1);
		    			}
		   	
		    	    	
		    	    	 
		    	}
		    }
		
		,{urls: ["<all_urls>"]},["responseHeaders","blocking"]);


chrome.webRequest.onCompleted.addListener( 
		
		function(details) {
	if(details.responseHeaders.find(function(e) {return (e.name=="content-length" || e.name=="Content-Length")}) && details.fromCache==false && settings.init==1 && details.tabId>=0){
		settings.data_downloaded[details.tabId]=settings.data_downloaded[details.tabId]+parseInt(details.responseHeaders.find(function(e) {return (e.name=="content-length" || e.name=="Content-Length")}).value);
		Statistics.TabStats_list[details.tabId]['data_downloaded']=Statistics.TabStats_list[details.tabId]['data_downloaded']+parseInt(details.responseHeaders.find(function(e) {return (e.name=="content-length" || e.name=="Content-Length")}).value);
		Statistics.TabStats_list[details.tabId]['time_last_data_downloaded']=details.timeStamp;
		if(details.url.match("https")){
			Statistics.TabStats_list[details.tabId]['data_downloaded_https']=Statistics.TabStats_list[details.tabId]['data_downloaded_https']+parseInt(details.responseHeaders.find(function(e) {return (e.name=="content-length" || e.name=="Content-Length")}).value);		
		}
		}
	if(details.fromCache==false && settings.init==1 &&details.tabId>=0){
		Statistics.TabStats_list[details.tabId]['num_objects']=Statistics.TabStats_list[details.tabId]['num_objects']+1
		if(details.url.match("https")){
			Statistics.TabStats_list[details.tabId]['num_objects_https']=Statistics.TabStats_list[details.tabId]['num_objects_https']+1
		}
	}
},

{urls: ["<all_urls>"]},["responseHeaders"]);


chrome.webRequest.onErrorOccurred.addListener(
		function(details) {
	    	if (settings.enabled && details.url!=settings.query_url && ! details.url.match("hello") && settings.init==1){	
	        	
	    	
	    		if (settings.debug == 1) { console.log("ERROR_OCCURRED")}
	    		if (settings.debug == 1) { console.log(details)}
	    	
	    		request_index=requests.map(function(e) {return e['requestId']}).indexOf(details.requestId);
	    		proxy_id=requests[request_index]['proxy_id']
	    		proxy_index=ProxyList.proxyListHttp.map(function(e) {return e['id']}).indexOf(proxy_id)
	    		ProxyList.proxyListHttp[proxy_index]['urls'].splice(ProxyList.proxyListHttp[proxy_index]['urls'].map(function(e) {return e}).indexOf(details.url),1);
	    		clearTimeout(requests[request_index]['timeout']);
	    		ProxyList.proxyListHttp[proxy_index]['errors']=ProxyList.proxyListHttp[proxy_index]['errors']+1
	    		requests.splice(request_index,1);
	    		if(settings.strategy==0){ 
	    			updatePac();
	    		}
	    	
	    	
	    		if(settings.retransmissions==1){
	    			if(titles[details.tabId]==details.url){
	    				if(settings.start_event[details.tabId]!=-1 && settings.experiments==1 && settings.reload==1){
	    					setTimeout(Reload,1000,details.tabId)
	    				}
	    			}
	    			else{
	    				chrome.tabs.executeScript(details.tab_id, {file:'jquery-2.0.3.min.js'});
	    				chrome.tabs.executeScript(details.tab_id, 
	    						{code: "console.log('"+details.url+"'); var x=$(\"*\").map(function(){ if($(this).prop('src')=='"+details.url+"'){  $(this).load('"+details.url+"'); return $(this).get(0);} else if ($(this).prop('href')) if($(this).prop('href').indexOf('"+details.url+"')>-1) { $(this).load('"+details.url+"'); return $(this).get(0);} }); console.log((x)); $(x).length",
	    						runAt: "document_idle"},
	    						function (result) {
	    							if (settings.debug == 1) { console.log("executed "+ result[0])}
	    						});
	    				}	
	    			}
	    	}
	    }
		,{urls: ["<all_urls>"]});


chrome.webNavigation.onBeforeNavigate.addListener(function(details) {
	if(details.frameId==0 && settings.enabled && settings.init==1){
	if (settings.debug == 1) { console.log("NAVIGATION STARTED EVENT "+ details.tabId+details.url+details.frameId)}
	
	//finish and move old data
	if(Statistics.TabStats_list[details.tabId]){
		Statistics.TabStats_list[details.tabId]['end_time']=details.timeStamp;
		Statistics.statsList[Statistics.num_stats]=Statistics.TabStats_list[details.tabId];
		Statistics.TabStats_list[details.tabId]=null;
		Statistics.num_stats=Statistics.num_stats+1;
		if(Statistics.num_stats>=settings.push_stats_after && settings.experiments==0){

				report_stats();

			}
	}
	
	if(details.url.match("https"))
	{
		protocol="https";
			}
	else
		{
		protocol="http";
		}
	
	if(settings.num_proxy_https>0){
	Statistics.TabStats_list[details.tabId]=new TabStats(settings.session_id,settings.enabled_id,details.timeStamp,0,0,protocol,0,0,0,0,0,0,0,0,0,0,0,0,0,false,0,"",ProxyList.default_proxy['ip']+":"+ProxyList.default_proxy['port'],ProxyList.proxyListHttps[0]['ip']+":"+ProxyList.proxyListHttps[0]['port']);
	}
	else{
		Statistics.TabStats_list[details.tabId]=new TabStats(settings.session_id,settings.enabled_id,details.timeStamp,0,0,protocol,0,0,0,0,0,0,0,0,0,0,0,0,0,false,0,"",ProxyList.default_proxy['ip']+":"+ProxyList.default_proxy['port'],"");
		}
	}
});
chrome.webNavigation.onCompleted.addListener(function(details) {
	if(details.frameId==0 && settings.enabled && settings.init==1 && Statistics.TabStats_list[details.tabId]){

		//add entry to statistics 
		Statistics.TabStats_list[details.tabId]['data_downloaded_at_onload']=Statistics.TabStats_list[details.tabId]['data_downloaded'];
		Statistics.TabStats_list[details.tabId]['data_downloaded_https_at_onload']=Statistics.TabStats_list[details.tabId]['data_downloaded_https'];
		Statistics.TabStats_list[details.tabId]['num_objects_requested_at_onload']=Statistics.TabStats_list[details.tabId]['num_objects_requested'];
		Statistics.TabStats_list[details.tabId]['num_objects_requested_https_at_onload']=Statistics.TabStats_list[details.tabId]['num_objects_requested_https'];
		Statistics.TabStats_list[details.tabId]['data_downloaded_https_at_onload']=Statistics.TabStats_list[details.tabId]['data_downloaded_https'];
		Statistics.TabStats_list[details.tabId]['onload']=details.timeStamp-Statistics.TabStats_list[details.tabId]['start'];
		Statistics.TabStats_list[details.tabId]['onload_event']=true;
		Statistics.TabStats_list[details.tabId]['num_objects_at_onload']=Statistics.TabStats_list[details.tabId]['num_objects'];
		Statistics.TabStats_list[details.tabId]['num_objects_https_at_onload']=Statistics.TabStats_list[details.tabId]['num_objects_https'];

		
	if (settings.debug == 1) { console.log(end_download + " COMPLETED EVENT "+ delta +" from first "+delta_init)}
		
		

	}
});
chrome.webNavigation.onErrorOccurred.addListener(function(details) {
	if (settings.debug == 1) { console.log("ERROR AND STOP")}
	if(details.frameId==0 && settings.enabled && settings.init==1 && Statistics.TabStats_list[details.tabId]){
		
		Statistics.TabStats_list[details.tabId]['data_downloaded_at_onload']=Statistics.TabStats_list[details.tabId]['data_downloaded']
		Statistics.TabStats_list[details.tabId]['num_objects_at_onload']=Statistics.TabStats_list[details.tabId]['num_objects'];
		Statistics.TabStats_list[details.tabId]['data_downloaded_https_at_onload']=Statistics.TabStats_list[details.tabId]['data_downloaded_https'];
		Statistics.TabStats_list[details.tabId]['num_objects_requested_at_onload']=Statistics.TabStats_list[details.tabId]['num_objects_requested'];
		Statistics.TabStats_list[details.tabId]['num_objects_requested_https_at_onload']=Statistics.TabStats_list[details.tabId]['num_objects_requested_https'];
		Statistics.TabStats_list[details.tabId]['data_downloaded_https_at_onload']=Statistics.TabStats_list[details.tabId]['data_downloaded_https'];
		Statistics.TabStats_list[details.tabId]['num_objects_at_onload']=Statistics.TabStats_list[details.tabId]['num_objects'];
		Statistics.TabStats_list[details.tabId]['num_objects_https_at_onload']=Statistics.TabStats_list[details.tabId]['num_objects_https'];
		Statistics.TabStats_list[details.tabId]['error_time']=details.timeStamp-Statistics.TabStats_list[details.tabId]['start'];
		Statistics.TabStats_list[details.tabId]['onload_event']=false;
		Statistics.TabStats_list[details.tabId]['error']=details.error;
		

	

	}
	
	

    
	if(settings.start_event[details.tabId]!=-1 && settings.experiments==1){
		if(settings.strategy==0){  
			clearTimeout(exploration_timeout);
			clearTimeout(exploitation_timeout);
			OnExploitationTimerExpired();
		}
		if(settings.reload==1 && settings.experiments==1){
			setTimeout(Reload,1000,details.tabId)
		}
	}
});


chrome.tabs.onRemoved.addListener(function(tabId,removeInfo) {
	if(Statistics.TabStats_list[tabId] && settings.enabled && settings.init==1){
		Statistics.TabStats_list[tabId]['end_time']=(new Date).getTime()
		Statistics.statsList[Statistics.num_stats]=Statistics.TabStats_list[tabId];
		Statistics.TabStats_list.splice([tabId],1)
		Statistics.num_stats=Statistics.num_stats+1;
		
				
		if(Statistics.num_stats>=settings.push_stats_after && settings.experiments==0){
				report_stats();
			}
	}
	
});




chrome.tabs.onReplaced.addListener(function(addedTabId, removedTabId) {
	tabId=removedTabId;
	if(Statistics.TabStats_list[tabId] && settings.enabled && settings.init==1){
		Statistics.TabStats_list[tabId]['end_time']=(new Date).getTime()
		Statistics.statsList[Statistics.num_stats]=Statistics.TabStats_list[tabId];
		Statistics.TabStats_list.splice([tabId],1)
		Statistics.num_stats=Statistics.num_stats+1;
		
				
		if(Statistics.num_stats>=settings.push_stats_after && settings.experiments==0){
				report_stats();
			}
	}
	
});





chrome.runtime.onStartup.addListener(function() {
	
	//For testing purposes initialize as follow
	if (settings.experiments==0){
		chrome.storage.sync.get(["enabled","anonimity","region"], function (obj) {
				settings.enabled=obj.enabled;
				settings.anonimity=obj.anonimity;
				settings.region=obj.region;
				if(settings.enabled==true){
					stop();
					//loadHandler();
					init();	
					settings.current_region=settings.region;
					settings.current_anonimity=settings.anonimity;
		
				}else{
					stop();
				}
	
		});

	}else{
		if (settings.debug == 1) { console.log("STARTUP")}
		stop();
		init();
		settings.enabled=true;
	}

	});

chrome.runtime.onSuspend.addListener(function() {
	for(i in Statistics.TabStats_list){
		Statistics.TabStats_list[i]['end_time']=(new Date).getTime()
		Statistics.statsList[Statistics.num_stats]=Statistics.TabStats_list[i];
		Statistics.num_stats=Statistics.num_stats+1;
	}
	Statistics.TabStats_list=[];
		
	if(Statistics.num_stats>0 && settings.experiments==0){
		report_stats();
	}
});

